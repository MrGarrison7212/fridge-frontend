<div class="fridge-shell">
  <header class="fridge-header">
    <div class="fridge-title">
      My Fridge – Items
    </div>

    <button class="fridge-add-btn" type="button" (click)="onAddClick()">
      + Add item
    </button>
  </header>

  <main class="fridge-content">
    @if (error()) {
      <div class="fridge-error">
        {{ error() }}
      </div>
    }

    @if (isAddOpen()) {
      <app-fridge-item-add
        [saving]="isSaving()"
        (add)="onAddItem($event)"
        (cancel)="onAddCancel()"
      ></app-fridge-item-add>
    }

    <app-fridge-search
      [search]="search()"
      (searchChange)="onSearchChange($event)"
    ></app-fridge-search>

    <app-fridge-sort-bar
      [sortBy]="sortBy()"
      [direction]="direction()"
      (sort)="onSort($event)"
      (toggleDirection)="toggleDirection()"
    ></app-fridge-sort-bar>




    @if (isLoading()) {
      <div class="fridge-loading">
        Loading items...
      </div>
    } @else {
      <app-fridge-table
        [items]="filteredItems()"
        (deleteItem)="onDeleteItem($event)"
      ></app-fridge-table>
    }

    <div class="fridge-pagination">
      <button
        type="button"
        (click)="prevPage()"
        [disabled]="page() === 0"
      >
        ‹ Prev
      </button>

      <span>Page {{ page() + 1 }} of {{ totalPages() }}</span>

      <button
        type="button"
        (click)="nextPage()"
        [disabled]="page() + 1 >= totalPages()"
      >
        Next ›
      </button>
    </div>

  </main>
</div>
